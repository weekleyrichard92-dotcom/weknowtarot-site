<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>We Know Tarot â€” Reader</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script type="module" crossorigin src="/tarot-reader/assets/index-BkGy-W56.js"></script>
    <link rel="stylesheet" crossorigin href="/tarot-reader/assets/index.css">
    <style>
      /* Add navbar/footer styles */
      .gold-text { color: #d4af37; }
      nav { font-family: 'Cinzel', serif; }
    </style>
  </head>
  <body>
    <div id="navbar"></div>
    <div id="root"></div>
    <div id="footer"></div>

    <script>
      // Inject navbar and footer
      async function inject(selector, url) {
        const el = document.querySelector(selector);
        if (!el) return;
        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error(`Failed to load ${url}`);
          const html = await res.text();
          el.innerHTML = html;

          // Initialize navbar menu after navbar is loaded
          if (selector === '#navbar') {
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            if (menuBtn && mobileMenu) {
              menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileMenu.classList.toggle('hidden');
              });
              document.addEventListener('click', (e) => {
                if (!mobileMenu.contains(e.target) && !menuBtn.contains(e.target)) {
                  mobileMenu.classList.add('hidden');
                }
              });
              document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !mobileMenu.classList.contains('hidden')) {
                  mobileMenu.classList.add('hidden');
                }
              });
            }
          }

          // Update footer year
          if (selector === '#footer') {
            const yr = document.getElementById('year');
            if (yr) yr.textContent = new Date().getFullYear();
          }
        } catch (error) {
          console.error(`Error loading ${selector}:`, error);
        }
      }

      inject('#navbar', '/components/navbar.html');
      inject('#footer', '/components/footer.html');
    </script>
  </body>
</html>
